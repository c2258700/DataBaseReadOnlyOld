
@{
    ViewBag.Title = "Select";
    Layout = null;
}


<html>
<head>
    <title></title>
    <style type="text/css">
        table.gridtable {
            font-family: verdana,arial,sans-serif;
            font-size: 11px;
            color: #333333;
            border-width: 1px;
            border-color: #666666;
            border-collapse: collapse;
        }

            table.gridtable th {
                border-width: 1px;
                padding: 8px;
                border-style: solid;
                border-color: #666666;
                background-color: #dedede;
            }

            table.gridtable td {
                border-width: 1px;
                padding: 8px;
                border-style: solid;
                border-color: #666666;
                background-color: #ffffff;
            }

        textarea {
            width:100%;
            height:180px;   
            margin:0px 0px 5px 0px;     
        }
        div#result {
            overflow:auto;
            height:500px;
            margin:10px 0;
        }
    </style> 
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script>
    $(function () {
        $("#search").bind("click", select);
    })

    function select() {
        var sql = $("#sql").val();
        if (sql) {
            $.ajax({
                url: "@Url.Action("SelectTable","Home")",
                data: "sql=" + sql + "&dbName=@(ViewBag.dbName)&connectionStringName=@(ViewBag.Conn)",
                type: "post",
                success: function (data) {
                    $("#result").html(data);
                }
            })
        }
    }
    </script>
</head>
<body>
    <div>
        <textarea id="sql">select top 100 * from @(ViewBag.tableName) with(nolock)</textarea> 
        <button id="search">查询</button>
    </div> 
    <div id="result"></div>
</body>
</html>

